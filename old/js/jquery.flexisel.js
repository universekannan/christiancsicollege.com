!function(a){a.fn.flexisel=function(b){var f,c=a.extend({visibleItems:4,animationSpeed:200,autoPlay:!1,autoPlaySpeed:3e3,pauseOnHover:!0,setMaxWidthAndHeight:!1,enableResponsiveBreakpoints:!0,flipPage:!1,clone:!0,responsiveBreakpoints:{portrait:{changePoint:480,visibleItems:1},landscape:{changePoint:640,visibleItems:2},tablet:{changePoint:768,visibleItems:3}}},b),d=a(this),e=a.extend(c,b),g=!0,h=e.visibleItems,i=d.children().length,j=[],k={init:function(){return this.each(function(){k.appendHTML(),k.setEventHandlers(),k.initializeItems()})},initializeItems:function(){var b=d.parent(),g=(b.height(),d.children());k.sortResponsiveObject(e.responsiveBreakpoints);var i=b.width();f=i/h,g.width(f),e.clone&&(g.last().insertBefore(g.first()),g.last().insertBefore(g.first()),d.css({left:-f})),d.fadeIn(),a(window).trigger("resize")},appendHTML:function(){d.addClass("nbs-flexisel-ul"),d.wrap("<div class='nbs-flexisel-container'><div class='nbs-flexisel-inner'></div></div>"),d.find("li").addClass("nbs-flexisel-item");var b=d.parent();if(e.setMaxWidthAndHeight){var c=a(".nbs-flexisel-item img").width(),f=a(".nbs-flexisel-item img").height();a(".nbs-flexisel-item img").css("max-width",c),a(".nbs-flexisel-item img").css("max-height",f)}if(a("<div class='nbs-flexisel-nav-left'></div><div class='nbs-flexisel-nav-right'></div>").insertAfter(b),e.clone){var g=d.children().clone();d.append(g)}},setEventHandlers:function(){var b=d.parent(),c=b.parent(),j=d.children(),l=c.find(".nbs-flexisel-nav-left"),m=c.find(".nbs-flexisel-nav-right");a(window).on("resize",function(c){k.setResponsiveEvents();var g=a(b).width(),n=a(b).height();if(f=g/h,j.width(f),e.clone?d.css({left:-f}):d.css({left:0}),!e.clone&&i<=h)l.add(m).css("visibility","hidden");else{l.add(m).css("visibility","visible");var o=l.height()/2,p=n/2-o;l.css("top",p+"px"),m.css("top",p+"px")}}),a(l).on("click",function(a){k.scrollLeft()}),a(m).on("click",function(a){k.scrollRight()}),e.pauseOnHover===!0&&a(".nbs-flexisel-item").on({mouseenter:function(){g=!1},mouseleave:function(){g=!0}}),e.autoPlay===!0&&setInterval(function(){g===!0&&k.scrollRight()},e.autoPlaySpeed),d[0].addEventListener("touchstart",k.touchHandler.handleTouchStart,!1),d[0].addEventListener("touchmove",k.touchHandler.handleTouchMove,!1)},setResponsiveEvents:function(){var b=a("html").width();if(e.enableResponsiveBreakpoints){var c=j[j.length-1].changePoint;for(var d in j){if(b>=c){h=e.visibleItems;break}if(b<j[d].changePoint){h=j[d].visibleItems;break}}}},sortResponsiveObject:function(a){var b=[];for(var c in a)b.push(a[c]);b.sort(function(a,b){return a.changePoint-b.changePoint}),j=b},scrollLeft:function(){if(d.position().left<0&&g===!0){g=!1;var a=d.parent(),b=a.width();f=b/h;var c=d.children(),i=e.flipPage?b:f;d.animate({left:"+="+i},{queue:!1,duration:e.animationSpeed,easing:"linear",complete:function(){e.clone&&c.last().insertBefore(c.first()),k.adjustScroll(),g=!0}})}},scrollRight:function(){var a=d.parent(),b=a.width();f=b/h;var c=f-b,j=d.position().left+(i-h)*f-b,l=e.flipPage?b:f;if(c<=Math.ceil(j)&&!e.clone)g===!0&&(g=!1,d.animate({left:"-="+l},{queue:!1,duration:e.animationSpeed,easing:"linear",complete:function(){k.adjustScroll(),g=!0}}));else if(e.clone&&g===!0){g=!1;var m=d.children();d.animate({left:"-="+l},{queue:!1,duration:e.animationSpeed,easing:"linear",complete:function(){m.first().insertAfter(m.last()),k.adjustScroll(),g=!0}})}},adjustScroll:function(){var a=d.parent(),b=d.children(),c=a.width();f=c/h,b.width(f);var g=e.flipPage?c:f;e.clone&&d.css({left:-g})},touchHandler:{xDown:null,yDown:null,handleTouchStart:function(a){this.xDown=a.touches[0].clientX,this.yDown=a.touches[0].clientY},handleTouchMove:function(a){if(this.xDown&&this.yDown){var b=a.touches[0].clientX,c=a.touches[0].clientY,d=this.xDown-b;this.yDown-c;Math.abs(d)>0&&(d>0?k.scrollRight():k.scrollLeft()),this.xDown=null,this.yDown=null,g=!0}}}};return k[b]?k[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error('Method "'+method+'" does not exist in flexisel plugin!'):k.init.apply(this)}}(jQuery);